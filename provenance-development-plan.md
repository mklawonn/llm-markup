# Provenance Namespace Development Plan

The goal of the `llm-provenance` namespace is to enable **Trust, Accountability, and Auditability** for content consumed or generated by LLMs.

Unlike `llm-policy` (Publisher Constraints) or `llm-intent` (Semantic Meaning), `llm-provenance` functions as an **Internal Ledger** or **Interchange Format** for the User Agent. It tracks the origin and reliability of information as it is synthesized from multiple sources (e.g., current page, external search, internal knowledge) into a final response.

This plan outlines the development of the alpha version of the Provenance Namespace, focusing on the **Agent-Centric / Synthesis Model**.

## Phase 1: Source Tracking (The "Where")
*Focus: Identifying the origin of information chunks.*

1.  **Introduce `llm-provenance-source`:**
    *   **Goal:** Track the canonical source URI of a content block.
    *   **Value:** URI (e.g., `https://techradar.com`, `urn:internal:knowledge-base`).
    *   **Use Case:** Enabling citations and source-linking in the final UI.

2.  **Introduce `llm-provenance-citation`:**
    *   **Goal:** Provide a human-readable label for the source.
    *   **Value:** String (e.g., "[1]", "TechRadar", "User Knowledge").
    *   **Use Case:** Rendering citation badges next to generated text.

## Phase 2: Synthesis & Reliability (The "How" & "Trust")
*Focus: Tracking transformations and communicating uncertainty.*

1.  **Introduce `llm-provenance-confidence` (Data Layer):**
    *   **Goal:** Express the agent's certainty in the accuracy of a specific chunk.
    *   **Value:** Float (0.0 - 1.0).
    *   **Use Case:** Graying out or flagging low-confidence information.

2.  **Introduce `llm-provenance-operation` (Causal Ledger):**
    *   **Goal:** A dynamic record of *why* and *how* the Agent modified the content across specific layers.
    *   **Format:** Space-separated list of `layer:explanation` pairs.
    *   **Layers:** `content`, `style`, `interaction`, `topology`, `data`, `intent`.
    *   **Explanation:** A succinct, Agent-generated summary of the rationale (3-5 words).
    *   **Example:** `llm-provenance-operation="content:summarized-article style:highlighted-warnings"`
    *   **Use Case:** User inspects an element to see "content:translated-from-french" or "interaction:added-sort-button".

## Processing Model & Conformance (The "Rules")

To ensure trust, the User Agent (UA) acts as the **Authority** on provenance, maintaining the Causal Ledger.

### 1. Deterministic Labeling & Causal Tracking
*   **External Data:** If the UA fetches data from an external source, it MUST tag it with `llm-provenance-source`.
*   **Causal Logging:** Whenever the Agent modifies a node (based on Policy permissions), it MUST append a corresponding entry to `llm-provenance-operation`.
    *   *Example:* If the Agent changes the CSS class, it must add `style:rationale`.
    *   *Constraint:* The Agent MUST NOT fabricate operations it did not perform.
*   **LLM Confidence:** The UA MAY query the LLM for a confidence score, but the UA MUST parse and apply the `llm-provenance-confidence` attribute to the container itself.

### 2. Rendering Requirements (Conspicuous Disclosure)


### 2. Rendering Requirements (Conspicuous Disclosure)
Provenance metadata MUST be accessible to the user.

*   **Mandatory Inspection:** The User Agent MUST provide a mechanism for the user to inspect the raw provenance data (Source, Role, Operation, Confidence) for any element. This MAY be implemented as a context menu item (e.g., "Inspect Provenance"), a dedicated panel, or a developer tool interface similar to "View Source".
*   **Recommended Practices:** To ensure conspicuous disclosure, the User Agent SHOULD visually distinguish content based on its `llm-provenance-role`.
    *   *Examples:* Colored borders for secondary sources, background highlights for corrections, or icons for AI-generated content.
    *   *Goal:* Users should be able to intuitively distinguish between primary content and synthesized/external content without needing to inspect every element.
*   **Non-Compliance:** Completely hiding provenance data with no way to access it is non-compliant.
